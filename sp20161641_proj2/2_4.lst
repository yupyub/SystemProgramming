5       1000  COPY   START  1000
10      1000  FIRST  STL    RETADR          17202D
15      1003         LDB    #LENGTH         69202D
20                   BASE   LENGTH
25      1006  CLOOP  +JSUB  RDREC           4B102036
30      100A         LDA    LENGTH          032026
35      100D         COMP   #0              290000
40      1010         JEQ    ENDFIL          332007
45      1013         +JSUB  WRREC           4B10205D
50      1017         J      CLOOP           3F2FEC
55      101A  ENDFIL LDA    EOF             032010
60      101D         STA    BUFFER          0F2016
65      1020         LDA    #3              010003
70      1023         STA    LENGTH          0F200D
75      1026         +JSUB  WRREC           4B10205D
80      102A         J      @RETADR         3E2003
85      102D  EOF    BYTE   C'EOF'          454F46
90      1030  RETADR RESW   1
95      1033  LENGTH RESW   1
100     1036  BUFFER RESB   4096
105           .
110           .      SUBROUTINE TO READ RECORD INTO BUFFER
115           .
120     2036  RDREC  CLEAR  X               B410
125     2038         CLEAR  A               B400
130     203A         CLEAR  S               B440
135     203C         +LDT   #4096           75101000
140     2040  RLOOP  TD     INPUT           E32019
145     2043         JEQ    RLOOP           332FFA
150     2046         RD     INPUT           DB2013
155     2049         COMPR  A, S            A004
160     204B         JEQ    EXIT            332008
165     204E         STCH   BUFFER, X       57C003
170     2051         TIXR   T               B850
175     2053         JLT    RLOOP           3B2FEA
180     2056  EXIT   STX    LENGTH          134000
185     2059         RSUB                   4F0000
190     205C  INPUT  BYTE   X'F1'           F1
195           .
200           .      SUBROUTINE TO WRITE RECORD FROM BUFFER
205           .
210     205D  WRREC  CLEAR  X               B410
215     205F         LDT    LENGTH          774000
220     2062  WLOOP  TD     OUTPUT          E32012
225     2065         JEQ    WLOOP           332FFA
230     2068         LDCH   BUFFER, X       53C003
235     206B         WD     OUTPUT          DF2009
240     206E         TIXR   T               B850
245     2070         JLT    WLOOP           3B2FEF
250     2073         HIO                    F4
255     2074         RSUB                   4F0000
260     2077  OUTPUT BYTE   X'05'           05
265                  END    FIRST
