5       0000  COPY   START  0
10      0000  FIRST  STL    RETADR          170000
15      0003         LDB    #LENGTH         690000
20                   BASE   LENGTH
25      0006  CLOOP  +JSUB  RDREC           00000000
30      000A         LDA    LENGTH          030000
35      000D         COMP   #0              290000
40      0010         JEQ    ENDFIL          330000
45      0013         +JSUB  WRREC           00000000
50      0017         J      CLOOP           3F0000
55      001A  ENDFIL LDA    EOF             030000
60      001D         STA    BUFFER          0F0000
65      0020         LDA    #3              010003
70      0023         STA    LENGTH          0F0000
75      0026         +JSUB  WRREC           00000000
80      002A         J      @RETADR         3E0000
85      002D  EOF    BYTE   C'EOF'          454F46
90      0030  RETADR RESW   1
95      0033  LENGTH RESW   1
100     0036  BUFFER RESB   4096
105           .
110           .      SUBROUTINE TO READ RECORD INTO BUFFER
115           .
120     1036  RDREC  CLEAR  X               B410
125     1038         CLEAR  A               B400
130     103A         CLEAR  S               B440
135     103C         +LDT   #4096           00000000
140     1040  RLOOP  TD     INPUT           E30000
145     1043         JEQ    RLOOP           330000
150     1046         RD     INPUT           DB0000
155     1049         COMPR  A, S            A004
160     104B         JEQ    EXIT            330000
165     104E         STCH   BUFFER, X       578000
170     1051         TIXR   T               B850
175     1053         JLT    RLOOP           3B0000
180     1056  EXIT   STX    LENGTH          130000
185     1059         RSUB                   4C0000
190     105C  INPUT  BYTE   X'F1'           F1
195           .
200           .      SUBROUTINE TO WRITE RECORD FROM BUFFER
205           .
210     105D  WRREC  CLEAR  X               B410
215     105F         LDT    LENGTH          770000
220     1062  WLOOP  TD     OUTPUT          E30000
225     1065         JEQ    WLOOP           330000
230     1068         LDCH   BUFFER, X       538000
235     106B         WD     OUTPUT          DF0000
240     106E         TIXR   T               B850
245     1070         JLT    WLOOP           3B0000
250     1073         RSUB                   4C0000
255     1076  OUTPUT BYTE   X'05'           05
260                  END    FIRST
